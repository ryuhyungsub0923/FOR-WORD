<!doctype html>
<html lang="ko" class="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>FOR:WORD â€” Editor View</title>

  <!-- Pretendard -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.css"/>

  <!-- Tailwind (dev only) -->
  <script>
    window.tailwind = window.tailwind || {};
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Pretendard','system-ui','sans-serif'] }
        }
      }
    };
  </script>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>

  <style>
    :root{
      /* ====== (ë„¤ë¹„ê²Œì´ì…˜: Social í˜ì´ì§€ì™€ ë™ì¼) ====== */
      --sb-nav-top: rgba(30,31,31,0.9);
      --sb-nav-bottom: #848C95;

      --sb-main-top: #2C2C2C;
      --sb-main-bottom: #929292;

      --sidebar-w: 212px;
      --sidebar-w-collapsed: 68px;
      --mobile-nav-h: 64px;

      /* ====== í¸ì§‘ í™”ë©´ í† í° ====== */
      --canvas-bg: #FFFFFF;
      --work-bg: #F7F7F8;
      --ink-1: #111827;
      --ink-2: #6B7280;
      --divider: #E5E7EB;

      /* ì¢Œì¸¡ ë…¸íŠ¸ íŒ¨ë„, ìš°ì¸¡ ì¶”ì²œ/ì±—/ë©”ëª¨ í­ */
      --index-w: 260px;      /* â† ì´ë¯¸ì§€ ëŠë‚Œì˜ ìŠ¬ë¦¼ í­ */
      --right-w: 360px;

      --editor-min-h: 520px;
    }

    body{ overflow:hidden; color:var(--ink-1); }

    /* ---------------- ë„¤ë¹„ê²Œì´ì…˜ (Socialê³¼ ë™ì¼) ---------------- */
    .nav-label{ font-size:14px; font-weight:400; line-height:1.3; letter-spacing:-0.02em; color:rgba(255,255,255,0.7); font-family:Pretendard, system-ui, sans-serif; }
    .nav-label-active{ color:#fff; font-weight:500; }

    .sidebar{
      width:var(--sidebar-w);
      background: linear-gradient(to bottom, var(--sb-nav-top) 0%, var(--sb-nav-bottom) 100%);
      transition: width 0.18s ease;
    }
    .sidebar[data-collapsed="true"]{ width:var(--sidebar-w-collapsed); }

    .brand-text{ font-size:18px; font-weight:600; line-height:1.2; letter-spacing:-0.02em; color:#fff; white-space:nowrap; }
    .sidebar[data-collapsed="true"] .brand-text{ display:none; }

    .brand-wrapper{ display:flex; align-items:center; justify-content:space-between; width:100%; position:relative; }
    .brand-left{ display:flex; align-items:center; gap:12px; cursor:pointer; width:auto; }
    .sidebar[data-collapsed="true"] .brand-left{ justify-content:center; width:100%; gap:0 !important; }

    .logo-wrapper{ flex-shrink:0; width:32px; height:32px; border-radius:6px; background-color:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .logo-wrapper img{ width:100%; height:100%; object-fit:contain; }
    .sidebar[data-collapsed="true"] .logo-wrapper{ display:none; }

    .expand-icon-wrapper{ flex-shrink:0; width:32px; height:32px; border-radius:6px; background-color:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15); display:none; align-items:center; justify-content:center; }
    .sidebar[data-collapsed="true"] .expand-icon-wrapper{ display:flex; }

    .brand-right{ flex-shrink:0; display:flex; align-items:center; justify-content:center; }
    .sidebar[data-collapsed="true"] .brand-right{ display:none; }

    .collapse-btn{ width:28px; height:28px; border-radius:6px; display:flex; align-items:center; justify-content:center; background-color:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15); transition:background-color .12s ease; cursor:pointer; }
    .collapse-btn:hover{ background-color:rgba(255,255,255,0.15); }
    .collapse-icon{ transition:transform .18s ease; }
    .sidebar[data-collapsed="true"] .collapse-icon{ transform:rotate(180deg); }

    .sidebar-nav-container{ display:flex; flex-direction:column; flex-grow:1; padding:24px 16px; }
    .sidebar[data-collapsed="true"] .sidebar-nav-container{ padding-left:10px; padding-right:10px; }

    .sidebar-nav-btn{
      width:180px; height:48px; display:flex; align-items:center; border-radius:0.5rem;
      padding:0 12px; gap:10px; text-align:left; transition:background-color .12s ease,color .12s ease;
      text-decoration:none; color:inherit;
    }
    .sidebar-nav-btn-active{ background-color:rgba(255,255,255,0.1); }
    .sidebar-nav-btn:hover{ background-color:rgba(255,255,255,0.1); }

    .sidebar[data-collapsed="true"] .sidebar-nav-btn{ width:48px; justify-content:center; gap:0; padding-left:0; padding-right:0; }
    .sidebar[data-collapsed="true"] .sidebar-nav-btn span.nav-label{ display:none; }

    .sidebar-divider{ width:100%; border-top:1px solid rgba(255,255,255,0.15); margin:16px 0; }
    .sidebar[data-collapsed="true"] .sidebar-divider{ margin:12px 0; }

    .profile-wrap{ padding:16px; }
    .sidebar[data-collapsed="true"] .profile-wrap{ padding-left:10px; padding-right:10px; }

    .profile-row{ display:flex; align-items:center; gap:12px; }
    .profile-icon{ width:32px; height:32px; border-radius:6px; background-color:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .profile-icon img{ width:100%; height:100%; object-fit:contain; }
    .profile-meta{ display:flex; flex-direction:column; line-height:1.2; }
    .sidebar[data-collapsed="true"] .profile-meta{ display:none; }

    .profile-border{ border-top:1px solid rgba(255,255,255,0.1); color:rgba(255,255,255,0.6); font-size:12px; }

    .main-bg{ background:linear-gradient(to bottom, var(--sb-main-top) 0%, var(--sb-main-bottom) 100%); }
    .mobile-nav-bg{ background:linear-gradient(to bottom, var(--sb-nav-top) 0%, var(--sb-nav-bottom) 100%); }
    .mobile-nav-btn{ display:flex; flex-direction:column; align-items:center; gap:4px; font-size:11px; line-height:1; text-decoration:none; color:rgba(255,255,255,0.7); }
    .mobile-nav-btn-active{ color:#fff; }

    /* ---------------- ì¢Œì¸¡ íŒ¨ë„ (ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼) ---------------- */
    #noteCol{
      width:var(--index-w);
      background:#fff;
      color:#0F172A;
      display:flex; flex-direction:column;
      border-right:1px solid #EDF0F3;
      height:100vh;
    }
    .note-head{
      height:44px; display:flex; align-items:center; gap:6px; padding:0 10px; border-bottom:1px solid #EDF0F3;
      font-size:12px; color:#6B7280;
    }
    .note-head .back{
      width:28px; height:28px; border-radius:8px; display:flex; align-items:center; justify-content:center;
      border:1px solid #E5E7EB; background:#F8FAFC; color:#111827; cursor:pointer;
    }
    .note-scroll{ flex:1; overflow:auto; padding:10px; }
    .sec-label{
      font-size:11px; color:#99A1AE; letter-spacing:.02em; margin:10px 2px 6px; display:flex; align-items:center; justify-content:space-between;
    }
    .card-selected{
      background:#EEF4FF; border:1px solid #D8E4FF; border-radius:12px; padding:10px; color:#111827;
    }
    .sel-title{ font-weight:800; font-size:13px; margin-bottom:6px; }
    .pill{ display:inline-flex; align-items:center; gap:6px; font-size:11px; padding:5px 8px; border-radius:999px; border:1px solid #E5E7EB; background:#fff; color:#111827; }
    .pill + .pill{ margin-left:6px; }

    .card-row{
      background:#F8FAFC; border:1px solid #E5E7EB; border-radius:10px; padding:10px; display:flex; align-items:center; gap:8px; color:#111827;
    }
    .file-ico{ width:18px; height:18px; border-radius:4px; background:#E5E7EB; display:flex; align-items:center; justify-content:center; font-size:11px; color:#334155; }

    .child-row{
      height:34px; display:flex; align-items:center; justify-content:space-between;
      border:1px solid #E5E7EB; border-radius:8px; padding:0 8px; background:#fff; color:#0F172A; font-size:13px;
    }
    .child-row + .child-row{ margin-top:8px; }
    .chev{ width:16px; height:16px; color:#64748B; }

    .note-footer{
      border-top:1px solid #EDF0F3; padding:10px; background:#fff;
    }
    .link-btn{
      width:100%; height:38px; border-radius:10px; background:#0B0B0E; color:#fff; font-size:13px; display:flex; align-items:center; justify-content:center;
    }

    /* ---------------- ì¤‘ì•™ íŒ¨ë„ (ì´ì „ ìŠ¹ì¸ëœ ìŠ¤íƒ€ì¼ ìœ ì§€) ---------------- */
    .center-wrap{ flex:1 1 auto; min-width:0; background:var(--canvas-bg); display:flex; flex-direction:column; }
    .doc-topbar{
      height:44px; display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid var(--divider); padding:0 14px;
      background:var(--canvas-bg);
      position:sticky; top:0; z-index:5;
    }
    .doc-title{ font-size:14px; color:#9CA3AF; outline:none; border:none; background:transparent; width:40%; }
    .doc-actions{ display:flex; align-items:center; gap:14px; font-size:12px; color:#374151; }
    .chip{ font-size:12px; padding:4px 8px; border-radius:999px; background:#111827; color:#fff; }

    .toolbar-wrap{ border-bottom:1px solid var(--divider); background:#F9FAFB; }
    .tag-row{ height:40px; display:flex; align-items:center; gap:8px; padding:0 12px; }
    .tag-add{ font-size:12px; border:1px solid #E5E7EB; background:#fff; padding:6px 10px; border-radius:999px; cursor:pointer; color:#374151; }
    .toolbar-row{ display:flex; align-items:center; gap:10px; padding:10px 12px; }
    .tbtn{ height:28px; min-width:28px; padding:0 8px; border-radius:6px; border:1px solid #D1D5DB; background:#fff; display:flex; align-items:center; justify-content:center; gap:6px; font-size:13px; cursor:pointer; color:#111827; }
    .tsep{ height:28px; width:1px; background:#E5E7EB; margin:0 2px; }

    .editor-area{
      flex:1 1 auto; min-height:var(--editor-min-h);
      padding:16px; outline:none; font-size:14px; line-height:1.8; color:#111827;
      white-space:pre-wrap; word-break:break-word;
    }
    .editor-area:empty:before{
      content:'í´ë¦­í•˜ì—¬ ë…¸íŠ¸ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”! ì˜¤ë¥¸ìª½ ë©”ëª¨ íƒ­ì—ì„œ ë©”ëª¨ë¥¼ ë“œë˜ê·¸í•´ì„œ ì—¬ê¸°ì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
      color:#9CA3AF;
    }
    .editor-footer{
      border-top:1px solid var(--divider); height:44px; display:flex; align-items:center; justify-content:space-between; padding:0 12px; background:#fff;
      position:sticky; bottom:0; z-index:2;
    }
    .icon-btn{ width:28px; height:28px; border-radius:6px; border:1px solid #E5E7EB; display:flex; align-items:center; justify-content:center; background:#fff; }

    /* ---------------- ìš°ì¸¡ íŒ¨ë„ (ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼) ---------------- */
    .right-col{
      width:var(--right-w); background:#FAFAFB; display:flex; flex-direction:column; height:100vh;
      border-left:2px dotted #60A5FA;
    }
    .tabs{ height:44px; display:flex; align-items:center; gap:8px; padding:0 10px; border-bottom:1px solid var(--divider); background:#FFFFFF; }
    .tab{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:8px; font-weight:600; font-size:13px; color:#374151; cursor:pointer; }
    .tab[aria-selected="true"]{ background:#F3F4F6; }
    .panel{ display:none; height:calc(100vh - 44px); }
    .panel[data-active="true"]{ display:flex; flex-direction:column; }

    .chat-log{ flex:1 1 auto; overflow:auto; padding:12px; }
    .bubble{ max-width:85%; border-radius:10px; padding:10px 12px; font-size:13px; line-height:1.55; }
    .bot{ background:#FFFFFF; border:1px solid #E5E7EB; color:#111827; margin-right:auto; box-shadow:0 1px 2px rgba(0,0,0,.04); }
    .me{ background:#111827; color:#fff; margin-left:auto; }
    .chat-bar{ border-top:1px solid var(--divider); background:#fff; padding:10px; display:flex; gap:8px; }
    .chat-input{ flex:1; border:1px solid #D1D5DB; border-radius:12px; padding:10px 12px; font-size:13px; }
    .send-btn{ width:36px; height:36px; border-radius:10px; background:#111827; color:#fff; display:flex; align-items:center; justify-content:center; }

    .memo-wrap{ flex:1; display:flex; flex-direction:column; }
    .memo-list{ flex:1; overflow:auto; padding:12px; }
    .memo-card{ background:#fff; border:1px solid #E5E7EB; border-radius:8px; padding:10px 12px; font-size:13px; color:#374151; margin-bottom:8px; }
    .memo-bar{ border-top:1px solid var(--divider); padding:10px; background:#fff; display:flex; gap:8px; }
    .memo-input{ flex:1; border:1px solid #D1D5DB; border-radius:10px; padding:10px 12px; font-size:13px; }

    .reco-wrap{ flex:1; overflow:auto; padding:12px; }
    .reco-card{ background:#fff; border:1px solid #E5E7EB; border-radius:8px; padding:12px; margin-bottom:8px; }
    .reco-title{ font-weight:700; font-size:13px; margin-bottom:4px; }
    .reco-sub{ font-size:12px; color:#4B5563; }
  </style>
</head>

<body class="font-sans text-white bg-[var(--sb-main-top)] min-h-screen flex flex-col md:flex-row">

  <!-- LEFT SIDEBAR (Socialê³¼ ë™ì¼ êµ¬ì¡°, Editor í™œì„±í™”) -->
  <aside id="sidebar" class="sidebar hidden md:flex flex-col shrink-0 select-none" data-collapsed="false">
    <div class="brand-area border-b border-white/10 px-[16px] py-[20px]">
      <div class="brand-wrapper">
        <div id="brandToggleArea" class="brand-left">
          <div class="logo-wrapper"><img src="home_assets/logo.png" alt="FOR:WORD"/></div>
          <div class="expand-icon-wrapper">
            <svg class="w-[16px] h-[16px] text-white/80" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="m9 6 6 6-6 6"/></svg>
          </div>
          <div class="flex flex-col"><div class="brand-text">FOR:WORD</div></div>
        </div>
        <div class="brand-right">
          <div id="collapseToggle" class="collapse-btn tap-highlight-clear" aria-label="Collapse sidebar">
            <svg class="collapse-icon w-[16px] h-[16px] text-white/80" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
          </div>
        </div>
      </div>
    </div>

    <nav class="sidebar-nav-container text-sm">
      <a href="home.html" class="sidebar-nav-btn tap-highlight-clear mb-[4px] hover:bg-white/10">
        <img src="home_assets/Main_icon.svg" alt="Main" class="w-[20px] h-[20px] object-contain"/>
        <span class="nav-label">Main</span>
      </a>

      <a href="editor.html" class="sidebar-nav-btn sidebar-nav-btn-active tap-highlight-clear mb-[4px] bg-white/10 hover:bg-white/15">
        <img src="home_assets/Editor_icon.svg" alt="Editor View" class="w-[20px] h-[20px] object-contain"/>
        <span class="nav-label nav-label-active">Editor View</span>
      </a>

      <a href="projects.html" class="sidebar-nav-btn tap-highlight-clear mb-[4px] hover:bg-white/10">
        <img src="home_assets/Project_icon.svg" alt="Projects" class="w-[20px] h-[20px] object-contain opacity-70"/>
        <span class="nav-label">Projects</span>
      </a>

      <a href="graph.html" class="sidebar-nav-btn tap-highlight-clear mb-[16px] hover:bg-white/10">
        <img src="home_assets/Graph_icon.svg" alt="Knowledge Graph" class="w-[20px] h-[20px] object-contain opacity-70"/>
        <span class="nav-label">Knowledge Graph</span>
      </a>

      <div class="sidebar-divider"></div>

      <a href="social.html" class="sidebar-nav-btn tap-highlight-clear mb-[4px] hover:bg-white/10">
        <img src="home_assets/Social_icon.svg" alt="Social" class="w-[20px] h-[20px] object-contain opacity-70"/>
        <span class="nav-label">Social</span>
      </a>
    </nav>

    <div class="profile-border text-xs text-white/60">
      <div class="profile-wrap">
        <div class="profile-row">
          <div class="profile-icon"><img src="home_assets/Profile_icon.svg" alt="Profile"/></div>
          <div class="profile-meta">
            <span class="text-white/90 text-[13px] font-medium">hs r</span>
            <span class="text-white/50 text-[11px]">Workspace</span>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- MOBILE NAV (Socialê³¼ ë™ì¼) -->
  <nav class="md:hidden fixed bottom-0 left-0 right-0 z-50 flex justify-around items-center border-t border-white/10 backdrop-blur-md mobile-nav-bg" style="height:var(--mobile-nav-h);">
    <a href="home.html" class="mobile-nav-btn">
      <img src="home_assets/Main_icon.svg" alt="Main" class="w-[24px] h-[24px] object-contain"/>
      <span>Main</span>
    </a>
    <a href="editor.html" class="mobile-nav-btn mobile-nav-btn-active">
      <img src="home_assets/Editor_icon.svg" alt="Editor" class="w-[24px] h-[24px] object-contain"/>
      <span>Editor</span>
    </a>
    <a href="projects.html" class="mobile-nav-btn">
      <img src="home_assets/Project_icon.svg" alt="Projects" class="w-[24px] h-[24px] object-contain opacity-70"/>
      <span>Projects</span>
    </a>
    <a href="graph.html" class="mobile-nav-btn">
      <img src="home_assets/Graph_icon.svg" alt="Graph" class="w-[24px] h-[24px] object-contain opacity-70"/>
      <span>Graph</span>
    </a>
    <a href="social.html" class="mobile-nav-btn">
      <img src="home_assets/Social_icon.svg" alt="Social" class="w-[24px] h-[24px] object-contain opacity-70"/>
      <span>Social</span>
    </a>
  </nav>

  <!-- ===== ì¢Œì¸¡ ë…¸íŠ¸ íŒ¨ë„ ===== -->
  <aside id="noteCol" class="hidden md:flex flex-col shrink-0">
    <div class="note-head">
      <button id="noteBack" class="back" title="ë’¤ë¡œ">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0F172A" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
      </button>
      <span>í˜„ì¬ ë…¸íŠ¸</span>
    </div>
    <div class="note-scroll">
      <!-- ì„ íƒëœ ë…¸íŠ¸ -->
      <div class="sec-label">ì„ íƒëœ ë…¸íŠ¸</div>
      <div class="card-selected">
        <div id="selTitle" class="sel-title">ê°œìš”</div>
        <div class="flex items-center">
          <span class="pill">í”„ë¡œì íŠ¸</span>
          <span class="pill">ê°œìš”</span>
        </div>
      </div>

      <!-- ìƒìœ„ ë…¸íŠ¸ -->
      <div class="sec-label" style="margin-top:14px;">ìƒìœ„ ë…¸íŠ¸</div>
      <div class="card-row" id="parentRow">
        <div class="file-ico">ğŸ“„</div>
        <div id="parentTitle" class="text-[13px]">í”„ë¡œì íŠ¸ ì •ì˜ì„œ</div>
      </div>

      <!-- í•˜ìœ„ ë…¸íŠ¸ -->
      <div class="sec-label" style="margin-top:14px;">
        <span>í•˜ìœ„ ë…¸íŠ¸ <span id="childCount" class="text-gray-400">(0)</span></span>
        <button id="addChild" class="text-[12px] text-gray-700">+ ì¶”ê°€</button>
      </div>
      <div id="childList"></div>
    </div>
    <div class="note-footer">
      <button id="linkBtn" class="link-btn">ë…¸íŠ¸ ì—°ê²°í•˜ê¸°</button>
    </div>
  </aside>

  <!-- ===== ì¤‘ì•™ ===== -->
  <main class="center-wrap">
    <div class="doc-topbar">
      <input id="docTitle" class="doc-title" placeholder="write title" />
      <div class="doc-actions">
        <span>ìŠ¤í”Œë¦¿ ë·° <span class="chip">ON</span></span>
        <span>ì €ì¥</span>
      </div>
    </div>

    <div class="toolbar-wrap">
      <div class="tag-row"><button class="tag-add">+ íƒœê·¸ ì¶”ê°€</button></div>
      <div class="toolbar-row">
        <button class="tbtn">B</button><button class="tbtn">I</button><button class="tbtn">U</button>
        <div class="tsep"></div>
        <button class="tbtn">âŸ¸</button><button class="tbtn">â†”</button><button class="tbtn">âŸ¹</button>
        <div class="tsep"></div>
        <button class="tbtn">â€¢</button><button class="tbtn">1.</button>
        <div class="tsep"></div>
        <button class="tbtn">&lt;&gt;</button><button class="tbtn">ğŸ”—</button><button class="tbtn">ğŸ–¼ï¸</button><button class="tbtn">ğŸ§© ìº”ë²„ìŠ¤</button>
      </div>
    </div>

    <div id="editorArea" class="editor-area" contenteditable="true"></div>

    <div class="editor-footer">
      <div class="flex items-center gap-2">
        <button class="icon-btn" title="ì¦ê²¨ì°¾ê¸°">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
        </button>
        <button class="icon-btn" title="ì²¨ë¶€">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="1.5"><path d="M21.44 11.05l-9.19 9.19a5 5 0 01-7.07-7.07l9.19-9.19a3 3 0 014.24 4.24l-9.2 9.19a1 1 0 01-1.41-1.41l8.49-8.49"/></svg>
        </button>
      </div>
      <button class="icon-btn" title="ë³´ë‚´ê¸°">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="1.5"><path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7z"/></svg>
      </button>
    </div>
  </main>

  <!-- ===== ìš°ì¸¡ ===== -->
  <aside class="right-col">
    <div class="tabs">
      <button id="tab-chat" class="tab" aria-selected="true" aria-controls="panel-chat">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="1.5"><path d="M21 15a4 4 0 01-4 4H7l-4 4V7a4 4 0 014-4h10a4 4 0 014 4z"/></svg>
        <span>ì±—ë´‡</span>
      </button>
      <button id="tab-memo" class="tab" aria-selected="false" aria-controls="panel-memo">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="1.5"><path d="M9 12h6M9 16h6M8 4h8a2 2 0 012 2v12l-4 4H8a2 2 0 01-2-2V6a2 2 0 012-2z"/></svg>
        <span>ë©”ëª¨</span>
      </button>
      <button id="tab-reco" class="tab" aria-selected="false" aria-controls="panel-reco">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="1.5"><path d="M12 2l3 7 7 .5-5 5 1.5 7L12 18 5.5 21 7 14 2 9.5 9 9z"/></svg>
        <span>ì¶”ì²œ</span>
      </button>
    </div>

    <!-- ì±—ë´‡ -->
    <section id="panel-chat" class="panel" data-active="true" role="tabpanel">
      <div class="chat-log" id="chatLog">
        <div class="bubble bot">ì•ˆë…•í•˜ì„¸ìš”! ë…¸íŠ¸ ì‘ì„±ì„ ë„ì™€ë“œë¦¬ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
      </div>
      <div class="chat-bar">
        <input id="chatInput" class="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."/>
        <button id="chatSend" class="send-btn" title="ì „ì†¡">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.5"><path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7z"/></svg>
        </button>
      </div>
    </section>

    <!-- ë©”ëª¨ -->
    <section id="panel-memo" class="panel" role="tabpanel">
      <div class="memo-wrap">
        <div id="memoList" class="memo-list"></div>
        <div class="memo-bar">
          <input id="memoInput" class="memo-input" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ê³  Enter"/>
          <button id="memoAdd" class="send-btn" title="ì¶”ê°€">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.5"><path d="M12 5v14M5 12h14"/></svg>
          </button>
        </div>
      </div>
    </section>

    <!-- ì¶”ì²œ -->
    <section id="panel-reco" class="panel" role="tabpanel">
      <div id="recoWrap" class="reco-wrap">
        <div class="reco-card">
          <div class="reco-title">ë„ë§ì—ì„œì˜ ë‚™ì›</div>
          <div class="reco-sub">ë„ë§ì¹œ ê³³ì— ë‚™ì›ì€ ì—†ë‹¤ì§€ë§Œ ë‚˜ëŠ” ë„ë§ì³¤ê³ , ê·¸ ê³³ì€ ì˜ˆìƒì¹˜ ëª»í•œ ë‚™ì›ì´ì—ˆë‹¤.</div>
        </div>
      </div>
    </section>
  </aside>

  <script>
    /* ===== Sidebar collapse/expand (ê³µí†µ) ===== */
    const sidebar = document.getElementById('sidebar');
    const collapseToggle = document.getElementById('collapseToggle');
    const brandToggleArea = document.getElementById('brandToggleArea');
    if(collapseToggle){
      collapseToggle.addEventListener('click', () => sidebar.setAttribute('data-collapsed', 'true'));
    }
    if(brandToggleArea){
      brandToggleArea.addEventListener('click', () => {
        if (sidebar.getAttribute('data-collapsed') === 'true') sidebar.setAttribute('data-collapsed', 'false');
      });
    }

    /* ===== í”„ë¡œì íŠ¸ ë¡œë“œ (ì¢Œì¸¡ íŒ¨ë„ ë°ì´í„° ë°˜ì˜) ===== */
    (function(){
      const LIST_KEY = 'fw_projects';
      const DRAFT_KEY = 'fw_project_draft_v2';

      const qs = new URLSearchParams(location.search);
      const projectId = (qs.get('projectId') || '').trim();

      function loadProject(){
        const list = JSON.parse(localStorage.getItem(LIST_KEY) || '[]');
        let p = null;
        if (projectId){ p = list.find(x => x && x.id === projectId) || null; }
        if (!p){
          try{ const d = JSON.parse(localStorage.getItem(DRAFT_KEY) || 'null'); if (d && typeof d === 'object') p = d; }catch(e){}
        }
        return p;
      }

      /* ---------- ì¢Œì¸¡ ë…¸íŠ¸ íŒ¨ë„ ë Œë” ---------- */
      function el(tag, attrs={}, children=[]){
        const n = document.createElement(tag);
        for (const k in attrs){ if (k==='class') n.className = attrs[k]; else n.setAttribute(k, attrs[k]); }
        (Array.isArray(children)?children:[children]).forEach(c=>{
          if (c==null) return;
          if (typeof c==='string' || typeof c==='number') n.appendChild(document.createTextNode(String(c)));
          else n.appendChild(c);
        });
        return n;
      }

      function renderNotePanel(p){
        const selTitle = document.getElementById('selTitle');
        const parentTitle = document.getElementById('parentTitle');
        const childList = document.getElementById('childList');
        const childCount = document.getElementById('childCount');

        const title = p?.title || 'ê°œìš”';
        selTitle.textContent = title;
        parentTitle.textContent = 'í”„ë¡œì íŠ¸ ì •ì˜ì„œ';

        // í•˜ìœ„ ë…¸íŠ¸ = Epics í˜¹ì€ KR íƒ€ì´í‹€ ì‚¬ìš©
        childList.innerHTML = '';
        const epics = Array.isArray(p?.epics) ? p.epics : [];
        const rows = [];

        epics.forEach((ep, i)=>{
          const name = ep?.epic?.trim() || `EPIC ${i+1}`;
          rows.push(name);
        });
        if (!rows.length) rows.push('SMART ëª©í‘œ ì¬ì •ì˜', 'EPIC 1 : ìœ í˜•ì„¬ ì¬ë¬´ê¸°');

        rows.slice(0,8).forEach(txt=>{
          const row = el('div',{class:'child-row'},[
            el('span',{},txt),
            el('span',{class:'chev'},'â€º')
          ]);
          childList.appendChild(row);
        });

        childCount.textContent = `(${rows.length})`;
      }

      // +ì¶”ê°€ ë²„íŠ¼(ë°ëª¨)
      document.getElementById('addChild').addEventListener('click', ()=>{
        const childList = document.getElementById('childList');
        const row = document.createElement('div');
        row.className = 'child-row';
        row.innerHTML = '<span>ìƒˆ í•˜ìœ„ ë…¸íŠ¸</span><span class="chev">â€º</span>';
        childList.appendChild(row);
        const childCount = document.getElementById('childCount');
        const n = childList.querySelectorAll('.child-row').length;
        childCount.textContent = `(${n})`;
      });

      document.getElementById('noteBack').addEventListener('click', ()=> history.back?.());

      renderNotePanel(loadProject());
    })();

    /* ===== ìš°ì¸¡ íƒ­/ì±—/ë©”ëª¨ ===== */
    (function(){
      const tabs = [
        {btn: document.getElementById('tab-chat'), panel: document.getElementById('panel-chat')},
        {btn: document.getElementById('tab-memo'), panel: document.getElementById('panel-memo')},
        {btn: document.getElementById('tab-reco'), panel: document.getElementById('panel-reco')}
      ];
      function act(i){
        tabs.forEach((t,idx)=>{
          t.btn.setAttribute('aria-selected', idx===i ? 'true':'false');
          t.panel.setAttribute('data-active', idx===i ? 'true':'false');
        });
      }
      tabs.forEach((t,i)=> t.btn.onclick = ()=> act(i));
      act(1); // ì´ë¯¸ì§€ì²˜ëŸ¼ ê¸°ë³¸ 'ì±—ë´‡' íƒ­ ë³´ì´ë„ë¡ â†’ 0, ì—ë””í„°ìš©ì€ 1ì´ ë©”ëª¨? ì›ë³¸ê³¼ ë§ì¶”ë ¤ë©´ 0ìœ¼ë¡œ ë°”ê¿”ë„ ë¨
      act(0);
    })();

    (function chatMemo(){
      const log = document.getElementById('chatLog');
      const input = document.getElementById('chatInput');
      const send = document.getElementById('chatSend');
      function push(role, text){
        const b = document.createElement('div');
        b.className = 'bubble ' + (role==='me'?'me':'bot');
        b.textContent = text;
        log.appendChild(b);
        log.scrollTop = log.scrollHeight + 9999;
      }
      function sendNow(){
        const v = input.value.trim(); if(!v) return;
        push('me', v); input.value='';
        setTimeout(()=> push('bot','ê¸°ë¡í–ˆì–´ìš”.'), 180);
      }
      send.onclick = sendNow;
      input.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); sendNow(); } });

      const memoList = document.getElementById('memoList');
      const memoInput = document.getElementById('memoInput');
      const memoAdd = document.getElementById('memoAdd');
      const KEY = 'fw_editor_memo_list';
      function renderMemo(){
        memoList.innerHTML='';
        (JSON.parse(localStorage.getItem(KEY) || '[]')).forEach(t=>{
          const d = document.createElement('div'); d.className='memo-card'; d.textContent = t; memoList.appendChild(d);
        });
      }
      function addMemo(){
        const v = memoInput.value.trim(); if(!v) return;
        const arr = JSON.parse(localStorage.getItem(KEY) || '[]'); arr.push(v);
        localStorage.setItem(KEY, JSON.stringify(arr)); memoInput.value=''; renderMemo();
      }
      memoAdd.onclick = addMemo;
      memoInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); addMemo(); }});
      renderMemo();
    })();
  </script>
</body>
</html>
